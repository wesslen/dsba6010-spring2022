---
title: Installing rethinking, Stan, and Bayesian Packages
date: "2021-12-01"
menu:
  resource:
    parent: Guides
type: docs
toc: true
weight: 2
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>

<div id="TOC">

</div>

<p>We’ll primarily use Richard McElreath’s <code>rethinking</code> R package. Installation can be a bit tricky so this guide will outline how to install as well as other packages that may be helpful in this class.</p>
<div id="rethinking-package" class="section level2">
<h2><code>rethinking</code> package</h2>
<p>The package’s github repository <a href="https://github.com/rmcelreath/rethinking" class="uri">https://github.com/rmcelreath/rethinking</a> is the best source of information, especially the <a href="https://github.com/rmcelreath/rethinking/issues">issues</a> section where likely if you run into errors, you may find tips to help install.</p>
<div id="install-rstan" class="section level3">
<h3>Install <code>rstan</code></h3>
<p>While this course uses R, the engine for running Bayesian is Stan. Stan is a C++ library that can be used in a variety of ways (R, Python, Julia, Command Line, etc.).</p>
<p>To get started, we’ll use it with <code>rstan</code>, which is the R package aligned to calling Stan.</p>
<p>To install it, follow these instructions: <a href="https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started" class="uri">https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started</a></p>
<p>You can find more information about <code>rstan</code> <a href="https://mc-stan.org/users/interfaces/rstan.html" class="uri">https://mc-stan.org/users/interfaces/rstan.html</a> or you can view the <a href="https://mc-stan.org/docs/2_28/stan-users-guide/index.html">Stan User Guide</a>.</p>
<p>To test whether you properly installed <code>rstan</code>, try running this (see original <a href="https://gist.github.com/rasmusab/744410db9cf85ecb85e1">GitHub Gist</a>):</p>
<pre class="r"><code>set.seed(123)
y &lt;- rbinom(30, size = 1, prob = 0.2016)

# Fitting a simple binomial model using Stan
library(rstan)</code></pre>
<pre><code>## Loading required package: StanHeaders</code></pre>
<pre><code>## Loading required package: ggplot2</code></pre>
<pre><code>## rstan (Version 2.21.2, GitRev: 2e1f913d3ca3)</code></pre>
<pre><code>## For execution on a local, multicore CPU with excess RAM we recommend calling
## options(mc.cores = parallel::detectCores()).
## To avoid recompilation of unchanged Stan programs, we recommend calling
## rstan_options(auto_write = TRUE)</code></pre>
<pre class="r"><code>model_string &lt;- &quot;
data {
  int n;
  int y[n];
}
parameters {
  real&lt;lower=0, upper=1&gt; theta;
}
model {
  y ~ bernoulli(theta);
}&quot;

stan_samples &lt;- stan(model_code = model_string, data = list(y = y, n = length(y)) )</code></pre>
<pre><code>## 
## SAMPLING FOR MODEL &#39;f6f19f2978447ffaf66a6d87ed7010fd&#39; NOW (CHAIN 1).
## Chain 1: 
## Chain 1: Gradient evaluation took 8e-06 seconds
## Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 0.08 seconds.
## Chain 1: Adjust your expectations accordingly!
## Chain 1: 
## Chain 1: 
## Chain 1: Iteration:    1 / 2000 [  0%]  (Warmup)
## Chain 1: Iteration:  200 / 2000 [ 10%]  (Warmup)
## Chain 1: Iteration:  400 / 2000 [ 20%]  (Warmup)
## Chain 1: Iteration:  600 / 2000 [ 30%]  (Warmup)
## Chain 1: Iteration:  800 / 2000 [ 40%]  (Warmup)
## Chain 1: Iteration: 1000 / 2000 [ 50%]  (Warmup)
## Chain 1: Iteration: 1001 / 2000 [ 50%]  (Sampling)
## Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)
## Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)
## Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)
## Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)
## Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)
## Chain 1: 
## Chain 1:  Elapsed Time: 0.003823 seconds (Warm-up)
## Chain 1:                0.003563 seconds (Sampling)
## Chain 1:                0.007386 seconds (Total)
## Chain 1: 
## 
## SAMPLING FOR MODEL &#39;f6f19f2978447ffaf66a6d87ed7010fd&#39; NOW (CHAIN 2).
## Chain 2: 
## Chain 2: Gradient evaluation took 1e-06 seconds
## Chain 2: 1000 transitions using 10 leapfrog steps per transition would take 0.01 seconds.
## Chain 2: Adjust your expectations accordingly!
## Chain 2: 
## Chain 2: 
## Chain 2: Iteration:    1 / 2000 [  0%]  (Warmup)
## Chain 2: Iteration:  200 / 2000 [ 10%]  (Warmup)
## Chain 2: Iteration:  400 / 2000 [ 20%]  (Warmup)
## Chain 2: Iteration:  600 / 2000 [ 30%]  (Warmup)
## Chain 2: Iteration:  800 / 2000 [ 40%]  (Warmup)
## Chain 2: Iteration: 1000 / 2000 [ 50%]  (Warmup)
## Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling)
## Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)
## Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)
## Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)
## Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)
## Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)
## Chain 2: 
## Chain 2:  Elapsed Time: 0.003928 seconds (Warm-up)
## Chain 2:                0.003779 seconds (Sampling)
## Chain 2:                0.007707 seconds (Total)
## Chain 2: 
## 
## SAMPLING FOR MODEL &#39;f6f19f2978447ffaf66a6d87ed7010fd&#39; NOW (CHAIN 3).
## Chain 3: 
## Chain 3: Gradient evaluation took 0 seconds
## Chain 3: 1000 transitions using 10 leapfrog steps per transition would take 0 seconds.
## Chain 3: Adjust your expectations accordingly!
## Chain 3: 
## Chain 3: 
## Chain 3: Iteration:    1 / 2000 [  0%]  (Warmup)
## Chain 3: Iteration:  200 / 2000 [ 10%]  (Warmup)
## Chain 3: Iteration:  400 / 2000 [ 20%]  (Warmup)
## Chain 3: Iteration:  600 / 2000 [ 30%]  (Warmup)
## Chain 3: Iteration:  800 / 2000 [ 40%]  (Warmup)
## Chain 3: Iteration: 1000 / 2000 [ 50%]  (Warmup)
## Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling)
## Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)
## Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)
## Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)
## Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)
## Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)
## Chain 3: 
## Chain 3:  Elapsed Time: 0.003897 seconds (Warm-up)
## Chain 3:                0.004199 seconds (Sampling)
## Chain 3:                0.008096 seconds (Total)
## Chain 3: 
## 
## SAMPLING FOR MODEL &#39;f6f19f2978447ffaf66a6d87ed7010fd&#39; NOW (CHAIN 4).
## Chain 4: 
## Chain 4: Gradient evaluation took 1e-06 seconds
## Chain 4: 1000 transitions using 10 leapfrog steps per transition would take 0.01 seconds.
## Chain 4: Adjust your expectations accordingly!
## Chain 4: 
## Chain 4: 
## Chain 4: Iteration:    1 / 2000 [  0%]  (Warmup)
## Chain 4: Iteration:  200 / 2000 [ 10%]  (Warmup)
## Chain 4: Iteration:  400 / 2000 [ 20%]  (Warmup)
## Chain 4: Iteration:  600 / 2000 [ 30%]  (Warmup)
## Chain 4: Iteration:  800 / 2000 [ 40%]  (Warmup)
## Chain 4: Iteration: 1000 / 2000 [ 50%]  (Warmup)
## Chain 4: Iteration: 1001 / 2000 [ 50%]  (Sampling)
## Chain 4: Iteration: 1200 / 2000 [ 60%]  (Sampling)
## Chain 4: Iteration: 1400 / 2000 [ 70%]  (Sampling)
## Chain 4: Iteration: 1600 / 2000 [ 80%]  (Sampling)
## Chain 4: Iteration: 1800 / 2000 [ 90%]  (Sampling)
## Chain 4: Iteration: 2000 / 2000 [100%]  (Sampling)
## Chain 4: 
## Chain 4:  Elapsed Time: 0.003985 seconds (Warm-up)
## Chain 4:                0.004036 seconds (Sampling)
## Chain 4:                0.008021 seconds (Total)
## Chain 4:</code></pre>
<pre class="r"><code>stan_samples</code></pre>
<pre><code>## Inference for Stan model: f6f19f2978447ffaf66a6d87ed7010fd.
## 4 chains, each with iter=2000; warmup=1000; thin=1; 
## post-warmup draws per chain=1000, total post-warmup draws=4000.
## 
##         mean se_mean   sd   2.5%    25%    50%    75%  97.5% n_eff Rhat
## theta   0.28    0.00 0.08   0.14   0.22   0.27   0.33   0.45  1505    1
## lp__  -19.52    0.02 0.72 -21.59 -19.68 -19.24 -19.06 -19.01  1686    1
## 
## Samples were drawn using NUTS(diag_e) at Mon Dec 13 16:33:46 2021.
## For each parameter, n_eff is a crude measure of effective sample size,
## and Rhat is the potential scale reduction factor on split chains (at 
## convergence, Rhat=1).</code></pre>
<pre class="r"><code>traceplot(stan_samples)</code></pre>
<p><img src="/resource/install-rethinking_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code>plot(stan_samples)</code></pre>
<pre><code>## ci_level: 0.8 (80% intervals)</code></pre>
<pre><code>## outer_level: 0.95 (95% intervals)</code></pre>
<p><img src="/resource/install-rethinking_files/figure-html/unnamed-chunk-1-2.png" width="672" /></p>
<p>Did you get similar output?</p>
</div>
<div id="install-cmdstanr" class="section level3">
<h3>Install <code>cmdstanr</code></h3>
<p>Like all things, Stan is going through changes and moving forward, <code>rstan</code> is falling out of favor and instead much more development will be used with <code>cmdstanr</code> rather than <code>rstan</code> (<a href="https://mc-stan.org/cmdstanr/articles/cmdstanr.html#comparison-with-rstan">here’s a comparison</a>).</p>
<p>The <code>rethinking</code> package works with either of these packages but it’s likely much better to use <code>cmdstanr</code> instead of <code>stanr</code>; therefore, Richard (and I) recommend installing both. <a href="https://mc-stan.org/cmdstanr/" class="uri">https://mc-stan.org/cmdstanr/</a></p>
<p>To install <code>cmdstanr</code>, you’ll need to install that from github (non-CRAN library).</p>
<pre class="r"><code># if you get an error, do you have devtools installed? 
devtools::install_github(&quot;stan-dev/cmdstanr&quot;)</code></pre>
<p>After you’ve installed it, if it’s your first time you’ll need to run:</p>
<pre class="r"><code># see https://mc-stan.org/cmdstanr/reference/install_cmdstan.html
cmdstanr::install_cmdstan()</code></pre>
<p>To check if it was installed correctly, run:</p>
<pre class="r"><code>cmdstanr::check_cmdstan_toolchain()</code></pre>
<pre><code>## The C++ toolchain required for CmdStan is setup properly!</code></pre>
<pre class="r"><code>library(cmdstanr)</code></pre>
<pre><code>## This is cmdstanr version 0.4.0.9000</code></pre>
<pre><code>## - Online documentation and vignettes at mc-stan.org/cmdstanr</code></pre>
<pre><code>## - CmdStan path set to: /Users/rhymenoceros/.cmdstan/cmdstan-2.28.2</code></pre>
<pre><code>## - Use set_cmdstan_path() to change the path</code></pre>
<pre class="r"><code>file &lt;- file.path(cmdstan_path(), &quot;examples&quot;, &quot;bernoulli&quot;, &quot;bernoulli.stan&quot;)

data_list &lt;- list(N = 10, y = c(0,1,0,0,0,0,0,0,0,1))
mod &lt;- cmdstan_model(file)
fit &lt;- mod$sample(
  data = data_list, 
  seed = 123, 
  chains = 4, 
  parallel_chains = 4,
  refresh = 500
)</code></pre>
<pre><code>## Running MCMC with 4 parallel chains...
## 
## Chain 1 Iteration:    1 / 2000 [  0%]  (Warmup) 
## Chain 1 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 1 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 1 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 1 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 1 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 2 Iteration:    1 / 2000 [  0%]  (Warmup) 
## Chain 2 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 2 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 2 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 2 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 2 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 3 Iteration:    1 / 2000 [  0%]  (Warmup) 
## Chain 3 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 3 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 3 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 3 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 3 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 4 Iteration:    1 / 2000 [  0%]  (Warmup) 
## Chain 4 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 4 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 4 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 4 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 4 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 1 finished in 0.0 seconds.
## Chain 2 finished in 0.0 seconds.
## Chain 3 finished in 0.0 seconds.
## Chain 4 finished in 0.0 seconds.
## 
## All 4 chains finished successfully.
## Mean chain execution time: 0.0 seconds.
## Total execution time: 0.4 seconds.</code></pre>
<pre class="r"><code>fit$summary()</code></pre>
<pre><code>## # A tibble: 2 × 10
##   variable   mean median    sd   mad      q5    q95  rhat ess_bulk ess_tail
##   &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 lp__     -7.27  -6.98  0.725 0.317 -8.76   -6.75   1.00    1910.    1726.
## 2 theta     0.247  0.232 0.119 0.120  0.0784  0.461  1.00    1530.    1575.</code></pre>
</div>
<div id="install-rethinking" class="section level3">
<h3>Install <code>rethinking</code></h3>
<p>Now with both <code>rstan</code> and <code>cmdstanr</code>, you can install <code>rethinking</code>:</p>
<pre class="r"><code>install.packages(c(&quot;coda&quot;,&quot;mvtnorm&quot;,&quot;devtools&quot;,&quot;loo&quot;,&quot;dagitty&quot;))
devtools::install_github(&quot;rmcelreath/rethinking&quot;)</code></pre>
<p>We can do a few functions to check to see if <code>rethinking</code> was installed correctly.</p>
<pre class="r"><code>library(rethinking)</code></pre>
<pre><code>## Loading required package: parallel</code></pre>
<pre><code>## rethinking (Version 2.13)</code></pre>
<pre><code>## 
## Attaching package: &#39;rethinking&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     rstudent</code></pre>
<pre class="r"><code>f &lt;- alist(
    y ~ dnorm( mu , sigma ),
    mu ~ dnorm( 0 , 10 ),
    sigma ~ dexp( 1 )
)

fit &lt;- quap( 
    f , 
    data=list(y=c(-1,1)) , 
    start=list(mu=0,sigma=1)
)

precis(fit)</code></pre>
<pre><code>##            mean        sd       5.5%    94.5%
## mu    0.0000000 0.5924240 -0.9468080 0.946808
## sigma 0.8392882 0.3287434  0.3138927 1.364684</code></pre>
<p>This first runs <code>quap</code> which uses quadratic approximation for fitting the posterior. This is what we’ll use for the first few weeks of the class before we use MCMC methods via Stan.</p>
<pre class="r"><code># this uses cmdstanr version; this is recommended
# you can set this permanently (i.e., don&#39;t need the argument) by running set_ulam_cmdstan(TRUE)
fit_stan &lt;- ulam( f , data=list(y=c(-1,1)), cmdstan = TRUE )</code></pre>
<pre><code>## Running MCMC with 1 chain, with 1 thread(s) per chain...
## 
## Chain 1 Iteration:   1 / 1000 [  0%]  (Warmup) 
## Chain 1 Iteration: 100 / 1000 [ 10%]  (Warmup) 
## Chain 1 Iteration: 200 / 1000 [ 20%]  (Warmup) 
## Chain 1 Iteration: 300 / 1000 [ 30%]  (Warmup) 
## Chain 1 Iteration: 400 / 1000 [ 40%]  (Warmup) 
## Chain 1 Iteration: 500 / 1000 [ 50%]  (Warmup) 
## Chain 1 Iteration: 501 / 1000 [ 50%]  (Sampling) 
## Chain 1 Iteration: 600 / 1000 [ 60%]  (Sampling) 
## Chain 1 Iteration: 700 / 1000 [ 70%]  (Sampling) 
## Chain 1 Iteration: 800 / 1000 [ 80%]  (Sampling) 
## Chain 1 Iteration: 900 / 1000 [ 90%]  (Sampling) 
## Chain 1 Iteration: 1000 / 1000 [100%]  (Sampling) 
## Chain 1 finished in 0.0 seconds.</code></pre>
<pre class="r"><code>precis(fit_stan)</code></pre>
<pre><code>##              mean        sd      5.5%    94.5%    n_eff     Rhat4
## mu    -0.08841271 1.6549093 -2.120005 1.957120 65.28501 1.0002767
## sigma  1.62526571 0.9387858  0.686161 3.472576 54.75995 0.9982491</code></pre>
</div>
</div>
<div id="optional-but-highly-helpful-bayesian-packages" class="section level2">
<h2>Optional but highly helpful Bayesian packages</h2>
<p>As Stan has grown in popularity, so too has Bayesian stats and a variety of package that work well with Stan.</p>
<div id="rstanarm" class="section level3">
<h3><code>rstanarm</code></h3>
<p>First, I recommend installing <code>rstanarm</code></p>
<pre class="r"><code>install.packages(&quot;rstanarm&quot;)</code></pre>
<p>Per <a href="https://mc-stan.org/rstanarm/articles/rstanarm.html">its helpful vignette</a>, the goal of the <code>rstanarm</code> package is to make Bayesian estimation routine for the most common regression models that applied researchers use. This will enable researchers to avoid the counter-intuitiveness of the frequentist approach to probability and statistics with only minimal changes to their existing R scripts.</p>
<p>To test whether the package was installed correctly, try this code:</p>
<pre class="r"><code>library(rstanarm)</code></pre>
<pre><code>## Loading required package: Rcpp</code></pre>
<pre><code>## This is rstanarm version 2.21.1</code></pre>
<pre><code>## - See https://mc-stan.org/rstanarm/articles/priors for changes to default priors!</code></pre>
<pre><code>## - Default priors may change, so it&#39;s safest to specify priors, even if equivalent to the defaults.</code></pre>
<pre><code>## - For execution on a local, multicore CPU with excess RAM we recommend calling</code></pre>
<pre><code>##   options(mc.cores = parallel::detectCores())</code></pre>
<pre><code>## 
## Attaching package: &#39;rstanarm&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:rethinking&#39;:
## 
##     logit, se</code></pre>
<pre><code>## The following object is masked from &#39;package:rstan&#39;:
## 
##     loo</code></pre>
<pre class="r"><code>fit &lt;- stan_glm(mpg ~ ., data = mtcars)</code></pre>
<pre><code>## 
## SAMPLING FOR MODEL &#39;continuous&#39; NOW (CHAIN 1).
## Chain 1: 
## Chain 1: Gradient evaluation took 2.2e-05 seconds
## Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 0.22 seconds.
## Chain 1: Adjust your expectations accordingly!
## Chain 1: 
## Chain 1: 
## Chain 1: Iteration:    1 / 2000 [  0%]  (Warmup)
## Chain 1: Iteration:  200 / 2000 [ 10%]  (Warmup)
## Chain 1: Iteration:  400 / 2000 [ 20%]  (Warmup)
## Chain 1: Iteration:  600 / 2000 [ 30%]  (Warmup)
## Chain 1: Iteration:  800 / 2000 [ 40%]  (Warmup)
## Chain 1: Iteration: 1000 / 2000 [ 50%]  (Warmup)
## Chain 1: Iteration: 1001 / 2000 [ 50%]  (Sampling)
## Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)
## Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)
## Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)
## Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)
## Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)
## Chain 1: 
## Chain 1:  Elapsed Time: 0.130535 seconds (Warm-up)
## Chain 1:                0.135468 seconds (Sampling)
## Chain 1:                0.266003 seconds (Total)
## Chain 1: 
## 
## SAMPLING FOR MODEL &#39;continuous&#39; NOW (CHAIN 2).
## Chain 2: 
## Chain 2: Gradient evaluation took 4e-06 seconds
## Chain 2: 1000 transitions using 10 leapfrog steps per transition would take 0.04 seconds.
## Chain 2: Adjust your expectations accordingly!
## Chain 2: 
## Chain 2: 
## Chain 2: Iteration:    1 / 2000 [  0%]  (Warmup)
## Chain 2: Iteration:  200 / 2000 [ 10%]  (Warmup)
## Chain 2: Iteration:  400 / 2000 [ 20%]  (Warmup)
## Chain 2: Iteration:  600 / 2000 [ 30%]  (Warmup)
## Chain 2: Iteration:  800 / 2000 [ 40%]  (Warmup)
## Chain 2: Iteration: 1000 / 2000 [ 50%]  (Warmup)
## Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling)
## Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)
## Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)
## Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)
## Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)
## Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)
## Chain 2: 
## Chain 2:  Elapsed Time: 0.121383 seconds (Warm-up)
## Chain 2:                0.102902 seconds (Sampling)
## Chain 2:                0.224285 seconds (Total)
## Chain 2: 
## 
## SAMPLING FOR MODEL &#39;continuous&#39; NOW (CHAIN 3).
## Chain 3: 
## Chain 3: Gradient evaluation took 5e-06 seconds
## Chain 3: 1000 transitions using 10 leapfrog steps per transition would take 0.05 seconds.
## Chain 3: Adjust your expectations accordingly!
## Chain 3: 
## Chain 3: 
## Chain 3: Iteration:    1 / 2000 [  0%]  (Warmup)
## Chain 3: Iteration:  200 / 2000 [ 10%]  (Warmup)
## Chain 3: Iteration:  400 / 2000 [ 20%]  (Warmup)
## Chain 3: Iteration:  600 / 2000 [ 30%]  (Warmup)
## Chain 3: Iteration:  800 / 2000 [ 40%]  (Warmup)
## Chain 3: Iteration: 1000 / 2000 [ 50%]  (Warmup)
## Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling)
## Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)
## Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)
## Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)
## Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)
## Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)
## Chain 3: 
## Chain 3:  Elapsed Time: 0.124128 seconds (Warm-up)
## Chain 3:                0.125103 seconds (Sampling)
## Chain 3:                0.249231 seconds (Total)
## Chain 3: 
## 
## SAMPLING FOR MODEL &#39;continuous&#39; NOW (CHAIN 4).
## Chain 4: 
## Chain 4: Gradient evaluation took 5e-06 seconds
## Chain 4: 1000 transitions using 10 leapfrog steps per transition would take 0.05 seconds.
## Chain 4: Adjust your expectations accordingly!
## Chain 4: 
## Chain 4: 
## Chain 4: Iteration:    1 / 2000 [  0%]  (Warmup)
## Chain 4: Iteration:  200 / 2000 [ 10%]  (Warmup)
## Chain 4: Iteration:  400 / 2000 [ 20%]  (Warmup)
## Chain 4: Iteration:  600 / 2000 [ 30%]  (Warmup)
## Chain 4: Iteration:  800 / 2000 [ 40%]  (Warmup)
## Chain 4: Iteration: 1000 / 2000 [ 50%]  (Warmup)
## Chain 4: Iteration: 1001 / 2000 [ 50%]  (Sampling)
## Chain 4: Iteration: 1200 / 2000 [ 60%]  (Sampling)
## Chain 4: Iteration: 1400 / 2000 [ 70%]  (Sampling)
## Chain 4: Iteration: 1600 / 2000 [ 80%]  (Sampling)
## Chain 4: Iteration: 1800 / 2000 [ 90%]  (Sampling)
## Chain 4: Iteration: 2000 / 2000 [100%]  (Sampling)
## Chain 4: 
## Chain 4:  Elapsed Time: 0.126911 seconds (Warm-up)
## Chain 4:                0.118344 seconds (Sampling)
## Chain 4:                0.245255 seconds (Total)
## Chain 4:</code></pre>
<pre class="r"><code>plot(fit)</code></pre>
<p><img src="/resource/install-rethinking_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
<div id="bayesplot" class="section level3">
<h3><code>bayesplot</code></h3>
<p>Another package that is handy is <code>bayesplot</code>, which provides helpful ways to visualize results from Stan models.</p>
<p>To install it, you’ll need to run:</p>
<pre class="r"><code>install.packages(&quot;bayesplot&quot;)</code></pre>
<p>You can then test it out running this code:</p>
<pre class="r"><code>library(bayesplot)</code></pre>
<pre><code>## This is bayesplot version 1.8.1</code></pre>
<pre><code>## - Online documentation and vignettes at mc-stan.org/bayesplot</code></pre>
<pre><code>## - bayesplot theme set to bayesplot::theme_default()</code></pre>
<pre><code>##    * Does _not_ affect other ggplot2 plots</code></pre>
<pre><code>##    * See ?bayesplot_theme_set for details on theme setting</code></pre>
<pre class="r"><code>library(ggplot2) # assume you already have it installed

posterior &lt;- as.matrix(fit)
plot_title &lt;- ggtitle(&quot;Posterior distributions&quot;,
                      &quot;with medians and 80% intervals&quot;)
mcmc_areas(posterior,
           pars = c(&quot;cyl&quot;, &quot;drat&quot;, &quot;am&quot;, &quot;wt&quot;),
           prob = 0.8) + plot_title</code></pre>
<p><img src="/resource/install-rethinking_files/figure-html/unnamed-chunk-12-1.png" width="672" />
This can also provide helpful post-predictive checks (i.e., see model fitting), for example:</p>
<pre class="r"><code>color_scheme_set(&quot;red&quot;)
ppc_dens_overlay(y = fit$y,
                 yrep = posterior_predict(fit, draws = 50))</code></pre>
<p><img src="/resource/install-rethinking_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="brms" class="section level3">
<h3><code>brms</code></h3>
<p>For most Bayesian research projects, <code>brms</code> has become the most popular R package. <a href="https://paul-buerkner.github.io/brms/" class="uri">https://paul-buerkner.github.io/brms/</a></p>
<p>It combines the intuition of class R regression modeling (<code>y ~ IV1 + IV1</code>) with mixed effects modeling like <code>lme4</code> syntax. This class we won’t use this package (maybe near the end of course) but it’s incredibly helpful to think about for your final project.</p>
<p>Like other CRAN libraries, to install:</p>
<pre class="r"><code>install.packages(&quot;brms&quot;)</code></pre>
<p>You can then run Bayesian mixed effects modeling simply with:</p>
<pre class="r"><code># tidybayes example: http://mjskay.github.io/tidybayes/articles/tidy-brms.html
set.seed(5)
n = 10
n_condition = 5
ABC =
  data.frame(
    condition = rep(c(&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;E&quot;), n),
    response = rnorm(n * 5, c(0,1,2,1,-1), 0.5)
  )

library(brms)</code></pre>
<pre><code>## Loading &#39;brms&#39; package (version 2.16.3). Useful instructions
## can be found by typing help(&#39;brms&#39;). A more detailed introduction
## to the package is available through vignette(&#39;brms_overview&#39;).</code></pre>
<pre><code>## 
## Attaching package: &#39;brms&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:rstanarm&#39;:
## 
##     dirichlet, exponential, get_y, lasso, ngrps</code></pre>
<pre><code>## The following objects are masked from &#39;package:rethinking&#39;:
## 
##     LOO, stancode, WAIC</code></pre>
<pre><code>## The following object is masked from &#39;package:rstan&#39;:
## 
##     loo</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     ar</code></pre>
<pre class="r"><code>m = brm(
  response ~ (1|condition), 
  data = ABC, 
  prior = c(
    prior(normal(0, 1), class = Intercept),
    prior(student_t(3, 0, 1), class = sd),
    prior(student_t(3, 0, 1), class = sigma)
  ),
  backend = &quot;cmdstanr&quot;, # optional; if not specified, will use stanr
  control = list(adapt_delta = .99)
)</code></pre>
<pre><code>## Start sampling</code></pre>
<pre><code>## Running MCMC with 4 sequential chains...
## 
## Chain 1 Iteration:    1 / 2000 [  0%]  (Warmup) 
## Chain 1 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 1 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 1 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 1 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 1 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 1 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 1 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 1 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 1 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 1 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 1 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 1 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 1 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 1 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 1 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 1 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 1 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 1 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 1 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 1 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 1 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 1 finished in 0.4 seconds.
## Chain 2 Iteration:    1 / 2000 [  0%]  (Warmup) 
## Chain 2 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 2 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 2 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 2 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 2 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 2 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 2 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 2 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 2 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 2 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 2 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 2 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 2 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 2 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 2 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 2 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 2 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 2 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 2 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 2 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 2 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 2 finished in 0.4 seconds.
## Chain 3 Iteration:    1 / 2000 [  0%]  (Warmup) 
## Chain 3 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 3 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 3 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 3 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 3 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 3 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 3 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 3 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 3 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 3 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 3 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 3 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 3 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 3 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 3 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 3 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 3 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 3 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 3 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 3 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 3 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 3 finished in 0.5 seconds.
## Chain 4 Iteration:    1 / 2000 [  0%]  (Warmup) 
## Chain 4 Iteration:  100 / 2000 [  5%]  (Warmup) 
## Chain 4 Iteration:  200 / 2000 [ 10%]  (Warmup) 
## Chain 4 Iteration:  300 / 2000 [ 15%]  (Warmup) 
## Chain 4 Iteration:  400 / 2000 [ 20%]  (Warmup) 
## Chain 4 Iteration:  500 / 2000 [ 25%]  (Warmup) 
## Chain 4 Iteration:  600 / 2000 [ 30%]  (Warmup) 
## Chain 4 Iteration:  700 / 2000 [ 35%]  (Warmup) 
## Chain 4 Iteration:  800 / 2000 [ 40%]  (Warmup) 
## Chain 4 Iteration:  900 / 2000 [ 45%]  (Warmup) 
## Chain 4 Iteration: 1000 / 2000 [ 50%]  (Warmup) 
## Chain 4 Iteration: 1001 / 2000 [ 50%]  (Sampling) 
## Chain 4 Iteration: 1100 / 2000 [ 55%]  (Sampling) 
## Chain 4 Iteration: 1200 / 2000 [ 60%]  (Sampling) 
## Chain 4 Iteration: 1300 / 2000 [ 65%]  (Sampling) 
## Chain 4 Iteration: 1400 / 2000 [ 70%]  (Sampling) 
## Chain 4 Iteration: 1500 / 2000 [ 75%]  (Sampling) 
## Chain 4 Iteration: 1600 / 2000 [ 80%]  (Sampling) 
## Chain 4 Iteration: 1700 / 2000 [ 85%]  (Sampling) 
## Chain 4 Iteration: 1800 / 2000 [ 90%]  (Sampling) 
## Chain 4 Iteration: 1900 / 2000 [ 95%]  (Sampling) 
## Chain 4 Iteration: 2000 / 2000 [100%]  (Sampling) 
## Chain 4 finished in 0.4 seconds.
## 
## All 4 chains finished successfully.
## Mean chain execution time: 0.4 seconds.
## Total execution time: 2.0 seconds.</code></pre>
<pre class="r"><code>m</code></pre>
<pre><code>##  Family: gaussian 
##   Links: mu = identity; sigma = identity 
## Formula: response ~ (1 | condition) 
##    Data: ABC (Number of observations: 50) 
##   Draws: 4 chains, each with iter = 1000; warmup = 0; thin = 1;
##          total post-warmup draws = 4000
## 
## Group-Level Effects: 
## ~condition (Number of levels: 5) 
##               Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
## sd(Intercept)     1.15      0.42     0.61     2.19 1.00      890     1168
## 
## Population-Level Effects: 
##           Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
## Intercept     0.49      0.45    -0.46     1.36 1.00      928     1150
## 
## Family Specific Parameters: 
##       Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
## sigma     0.56      0.06     0.46     0.69 1.00     1700     1671
## 
## Draws were sampled using sample(hmc). For each parameter, Bulk_ESS
## and Tail_ESS are effective sample size measures, and Rhat is the potential
## scale reduction factor on split chains (at convergence, Rhat = 1).</code></pre>
<p>Soloman Kurz has an amazing reproduction of our textbook but translated into <code>brms</code> as well as <code>tidyverse</code>: <a href="https://bookdown.org/content/4857/">Statistical rethinking with brms, ggplot2, and the tidyverse: Second edition</a></p>
</div>
<div id="tidybayes-and-ggdist" class="section level3">
<h3><code>tidybayes</code> and <code>ggdist</code></h3>
<p>Last, <code>tidybayes</code> is in incredibly helpful package that combines Bayesian statistics from a <a href="https://r4ds.had.co.nz/tidy-data.html"><code>tidy</code></a> perspective that underpins the <a href="https://www.tidyverse.org/"><code>tidyverse</code></a>.</p>
<p>In addition, <code>tidybayes</code>’ sister package, <code>ggdist</code>, enables incredibly powerful uncertainty visualizations via <code>ggplot2</code>.</p>
<p><img src="https://mjskay.github.io/ggdist/reference/figures/preview.png" /></p>
<p>To install these packages, you can run:</p>
<pre class="r"><code>install.packages(&#39;ggdist&#39;)
install.packages(&#39;tidybayes&#39;)</code></pre>
<pre class="r"><code>library(ggdist)</code></pre>
<pre><code>## 
## Attaching package: &#39;ggdist&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:brms&#39;:
## 
##     dstudent_t, pstudent_t, qstudent_t, rstudent_t</code></pre>
<pre class="r"><code>library(tidybayes)</code></pre>
<pre><code>## 
## Attaching package: &#39;tidybayes&#39;
## 
## The following objects are masked from &#39;package:brms&#39;:
## 
##     dstudent_t, pstudent_t, qstudent_t, rstudent_t</code></pre>
<pre class="r"><code>library(magrittr) # part of tidyverse; install if you don&#39;t have</code></pre>
<pre><code>## 
## Attaching package: &#39;magrittr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:rstan&#39;:
## 
##     extract</code></pre>
<pre class="r"><code>library(modelr) # install if you don&#39;t have; data_grid is from it</code></pre>
<pre><code>## 
## Attaching package: &#39;modelr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:rethinking&#39;:
## 
##     resample</code></pre>
<pre class="r"><code>ABC %&gt;%
  data_grid(condition) %&gt;%
  add_epred_rvars(m) %&gt;%
  ggplot(aes(dist = .epred, y = condition)) +
  stat_dist_dotsinterval(quantiles = 100)</code></pre>
<p><img src="/resource/install-rethinking_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>This provides posterior means using quantile dot plots, which are frequency-format uncertainty visualizations that have showed great promise in improving decision-making (<a href="https://dl.acm.org/doi/10.1145/2858036.2858558">Kay et al. 2016</a>, <a href="https://dl.acm.org/doi/10.1145/3173574.3173718">Fernandes et al. 2018</a>)</p>
</div>
<div id="tidybayes.rethinking" class="section level3">
<h3><code>tidybayes.rethinking</code></h3>
<p>There is even a <code>tidybayes</code> package that works specifically for the <code>rethinking</code> package. I encourage you to install this as we may</p>
<pre class="r"><code>devtools::install_github(&quot;mjskay/tidybayes.rethinking&quot;)</code></pre>
<p>You can now run this:</p>
<pre class="r"><code>library(tidybayes.rethinking)

# bayesian regression wt (x) on mpg (y)
m = quap(alist(
    mpg ~ dlnorm(mu, sigma),
    mu &lt;- a + b*wt,
    c(a,b) ~ dnorm(0, 10),
    sigma ~ dexp(1)
  ),
  data = mtcars,
  start = list(a = 4, b = -1, sigma = 1)
)

m %&gt;%
  tidybayes::tidy_draws() %&gt;%
  tidybayes::gather_variables() %&gt;%
  median_qi() %&gt;%
  ggplot(aes(y = .variable, x = .value, xmin = .lower, xmax = .upper)) +
  geom_pointinterval()</code></pre>
<p><img src="/resource/install-rethinking_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
</div>
</div>
<div id="package-versions-above" class="section level2">
<h2>Package versions above</h2>
<p>When using R (or any open source language), it’s very important to keep links for package versions. I <strong>highly</strong> recommend running in Rmarkdown files this code at the end to timestamp what packages were used.</p>
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>## R version 4.1.1 (2021-08-10)
## Platform: aarch64-apple-darwin20 (64-bit)
## Running under: macOS Monterey 12.0.1
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] parallel  stats     graphics  grDevices datasets  utils     methods  
## [8] base     
## 
## other attached packages:
##  [1] tidybayes.rethinking_3.0.0 modelr_0.1.8              
##  [3] magrittr_2.0.1             tidybayes_3.0.1           
##  [5] ggdist_3.0.1               brms_2.16.3               
##  [7] bayesplot_1.8.1            rstanarm_2.21.1           
##  [9] Rcpp_1.0.7                 digest_0.6.29             
## [11] rethinking_2.13            cmdstanr_0.4.0.9000       
## [13] rstan_2.21.2               ggplot2_3.3.5             
## [15] StanHeaders_2.21.0-7       knitr_1.36                
## 
## loaded via a namespace (and not attached):
##   [1] minqa_1.2.4          colorspace_2.0-2     ellipsis_0.3.2      
##   [4] ggridges_0.5.3       rsconnect_0.8.25     markdown_1.1        
##   [7] base64enc_0.1-3      rstudioapi_0.13      farver_2.1.0        
##  [10] svUnit_1.0.6         DT_0.20              fansi_0.5.0         
##  [13] mvtnorm_1.1-3        bridgesampling_1.1-2 codetools_0.2-18    
##  [16] splines_4.1.1        shinythemes_1.2.0    jsonlite_1.7.2      
##  [19] nloptr_1.2.2.3       broom_0.7.9          shiny_1.7.1         
##  [22] compiler_4.1.1       backports_1.3.0      assertthat_0.2.1    
##  [25] Matrix_1.3-4         fastmap_1.1.0        cli_3.1.0           
##  [28] later_1.3.0          htmltools_0.5.2      prettyunits_1.1.1   
##  [31] tools_4.1.1          igraph_1.2.9         coda_0.19-4         
##  [34] gtable_0.3.0         glue_1.5.1           reshape2_1.4.4      
##  [37] dplyr_1.0.7          posterior_1.1.0      V8_3.6.0            
##  [40] jquerylib_0.1.4      vctrs_0.3.8          nlme_3.1-152        
##  [43] blogdown_1.5         crosstalk_1.2.0      tensorA_0.36.2      
##  [46] xfun_0.28            stringr_1.4.0        ps_1.6.0            
##  [49] lme4_1.1-27.1        mime_0.12            miniUI_0.1.1.1      
##  [52] lifecycle_1.0.1      renv_0.14.0          gtools_3.9.2        
##  [55] MASS_7.3-54          zoo_1.8-9            scales_1.1.1        
##  [58] colourpicker_1.1.1   Brobdingnag_1.2-6    promises_1.2.0.1    
##  [61] inline_0.3.19        shinystan_2.5.0      yaml_2.2.1          
##  [64] curl_4.3.2           gridExtra_2.3        loo_2.4.1           
##  [67] sass_0.4.0           stringi_1.7.6        highr_0.9           
##  [70] dygraphs_1.1.1.6     checkmate_2.0.0      boot_1.3-28         
##  [73] pkgbuild_1.3.0       shape_1.4.6          rlang_0.4.12        
##  [76] pkgconfig_2.0.3      matrixStats_0.61.0   distributional_0.2.2
##  [79] evaluate_0.14        lattice_0.20-44      purrr_0.3.4         
##  [82] rstantools_2.1.1     htmlwidgets_1.5.4    labeling_0.4.2      
##  [85] processx_3.5.2       tidyselect_1.1.1     plyr_1.8.6          
##  [88] bookdown_0.24        R6_2.5.1             generics_0.1.1      
##  [91] DBI_1.1.1            pillar_1.6.4         withr_2.4.3         
##  [94] xts_0.12.1           survival_3.2-11      abind_1.4-5         
##  [97] tibble_3.1.6         crayon_1.4.2         arrayhelpers_1.1-0  
## [100] utf8_1.2.2           rmarkdown_2.11       grid_4.1.1          
## [103] data.table_1.14.2    callr_3.7.0          threejs_0.3.3       
## [106] xtable_1.8-4         tidyr_1.1.4          httpuv_1.6.3        
## [109] RcppParallel_5.1.4   stats4_4.1.1         munsell_0.5.0       
## [112] bslib_0.3.1          shinyjs_2.0.0</code></pre>
</div>
