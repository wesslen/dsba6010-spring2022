---
date: "2021-12-01"
title: "Example: 15-1"
menu:
  content:
    parent: Examples
    weight: 15
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<div id="examples" class="section level2">
<h2>15.1 Examples</h2>
<pre class="r"><code># simulate a pancake and return randomly ordered sides
sim_pancake &lt;- function() {
    pancake &lt;- sample(1:3,1)
    sides &lt;- matrix(c(1,1,1,0,0,0),2,3)[,pancake]
    sample(sides)
}

# sim 10,000 pancakes
pancakes &lt;- replicate( 1e4 , sim_pancake() )
up &lt;- pancakes[1,]
down &lt;- pancakes[2,]

# compute proportion 1/1 (BB) out of all 1/1 and 1/0
num_11_10 &lt;- sum( up==1 )
num_11 &lt;- sum( up==1 &amp; down==1 )
print(num_11/num_11_10)</code></pre>
<pre><code>## [1] 0.6785428</code></pre>
</div>
<div id="measurement-error" class="section level2">
<h2>15.2 Measurement Error</h2>
<pre class="r"><code>data(WaffleDivorce, package = &quot;rethinking&quot;)
d &lt;- WaffleDivorce
rm(WaffleDivorce)</code></pre>
<pre class="r"><code># points
plot( d$Divorce ~ d$MedianAgeMarriage , ylim=c(4,15) ,
    xlab=&quot;Median age marriage&quot; , ylab=&quot;Divorce rate&quot; )

# standard errors
for ( i in 1:nrow(d) ) {
    ci &lt;- d$Divorce[i] + c(-1,1)*d$Divorce.SE[i]
    x &lt;- d$MedianAgeMarriage[i]
    lines( c(x,x) , ci )
}</code></pre>
<p><img src="/example/15-1-example_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>dlist &lt;- list(
    D_obs = standardize( d$Divorce ),
    D_sd = d$Divorce.SE / sd( d$Divorce ),
    M = standardize( d$Marriage ),
    A = standardize( d$MedianAgeMarriage ),
    N = nrow(d)
)

m15.1 &lt;- ulam(
    alist(
        D_obs ~ dnorm( D_true , D_sd ),
        vector[N]:D_true ~ dnorm( mu , sigma ),
        mu &lt;- a + bA*A + bM*M,
        a ~ dnorm(0,0.2),
        bA ~ dnorm(0,0.5),
        bM ~ dnorm(0,0.5),
        sigma ~ dexp(1)
    ) , data=dlist , chains=4 , cores=4, cmdstan=TRUE )

## R code 15.4
precis( m15.1 , depth=2 )</code></pre>
<pre class="r"><code>#plot(m15.1)</code></pre>
</div>
